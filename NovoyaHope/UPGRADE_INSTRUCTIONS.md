# Инструкции по обновлению системы опросов

## Что было сделано

### 1. Расширение типов вопросов

Добавлены новые типы вопросов в `Models/Question.cs`:
- ✅ Текст (строка) - ShortText
- ✅ Текст (абзац) - ParagraphText
- ✅ Один из списка - SingleChoice
- ✅ Несколько из списка - MultipleChoice
- ✨ **Раскрывающийся список** - Dropdown (НОВОЕ)
- ✨ **Загрузка файлов** - FileUpload (НОВОЕ)
- ✅ Шкала - Scale
- ✨ **Оценка** - Rating (НОВОЕ)
- ✨ **Сетка флажков** - CheckboxGrid (НОВОЕ)
- ✨ **Сетка (множественный выбор)** - RadioGrid (НОВОЕ)
- ✨ **Дата** - Date (НОВОЕ)
- ✨ **Время** - Time (НОВОЕ)

### 2. Улучшения UI

#### Плавные анимации (wwwroot/css/constructor.css):
- Анимация появления новых вопросов (slideIn)
- Плавное затухание (fadeIn)
- Плавное раскрытие (slideDown)
- Hover-эффекты для всех интерактивных элементов
- Улучшенные тени и переходы

#### Обновленный конструктор (Views/Survey/Constructor.cshtml):
- Поддержка всех новых типов вопросов
- Улучшенный выпадающий список выбора типа вопроса
- Обновленные иконки и визуальные элементы

#### JavaScript функциональность (wwwroot/js/constructor.js):
- Динамическое изменение типа вопроса с анимацией
- Улучшенная функция дублирования вопросов
- Поддержка специальных типов (сетки, рейтинг, шкала)
- Автофокус на новых элементах

### 3. Добавлены иконки Font Awesome

В `Views/Shared/_Layout.cshtml` добавлена библиотека Font Awesome 6.4.0 для иконок.

## Миграция базы данных

Поскольку enum типы в Entity Framework хранятся как числа (int), существующие данные останутся совместимыми. Однако рекомендуется создать миграцию для документирования изменений:

```bash
# Создание миграции
dotnet ef migrations add AddNewQuestionTypes

# Применение миграции
dotnet ef database update
```

**Примечание**: Если миграция не требуется (enum хранится как int), можно пропустить этот шаг.

## Запуск приложения

```bash
dotnet run
```

Приложение будет доступно по адресу: `http://localhost:5017`

## Использование новых типов вопросов

### В конструкторе опросов:

1. **Нажмите "➕"** для добавления нового вопроса
2. **Выберите тип вопроса** из выпадающего списка
3. **Заполните вопрос** и варианты ответов (если применимо)
4. **Сохраните** изменения

### Специальные типы:

#### Шкала
- Отображает значения от 1 до 5
- Подходит для оценки степени согласия

#### Оценка ⭐
- Отображает звездочки для рейтинга
- Подходит для оценки качества/удовлетворенности

#### Сетки (CheckboxGrid/RadioGrid)
- Позволяют задавать вопросы в табличном формате
- Строки и столбцы настраиваются отдельно

#### Загрузка файлов
- Позволяет пользователям загружать файлы
- Отображает область для перетаскивания файлов

## Что дальше?

### Рекомендуемые улучшения:

1. **Реализация обработки ответов** для новых типов вопросов в `PublicController.cs`
2. **Визуализация результатов** для новых типов в `SurveyController.Results`
3. **Настройка сеток**: добавить редактор строк и столбцов для GridTypes
4. **Загрузка файлов**: реализовать backend для хранения файлов
5. **Валидация**: добавить проверки для обязательных полей всех типов

## Поддержка

При возникновении проблем проверьте:
- Версию .NET (требуется .NET 8.0)
- Подключение к базе данных в `appsettings.json`
- Наличие всех необходимых пакетов NuGet

## Изменения в файлах

- ✅ `Models/Question.cs` - расширен enum
- ✅ `Views/Survey/Constructor.cshtml` - обновлен UI
- ✅ `wwwroot/js/constructor.js` - добавлена логика
- ✅ `wwwroot/css/constructor.css` - добавлены анимации
- ✅ `Views/Shared/_Layout.cshtml` - добавлен Font Awesome

---

**Версия**: 2.0  
**Дата**: 26 ноября 2025  
**Статус**: ✅ Готово к использованию

